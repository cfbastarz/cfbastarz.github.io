---
layout: post
title: Executando comandos remotamente dentro de uma rede linux com o SSH
date: 2011-02-25 17:44:34.000000000 -03:00
type: post
parent_id: '0'
published: true
password: ''
status: publish
categories:
- Internet
- Tudo
- Tutoriais
tags:
- comandos via SSH
- SSH
meta:
  _edit_last: '13386696'
  _thumbnail_id: '1201'
  _wpas_skip_twitter: '1'
  _wpas_skip_fb: '1'
  _wpas_skip_ms: '1'
author:
  login: craftmind
  email: cfbastarz@gmail.com
  display_name: cfbastarz
  first_name: ''
  last_name: ''
permalink: "/2011/02/25/executando-comandos-remotamente-dentro-de-uma-rede-linux-com-o-ssh/"
---
<p>Às vezes queremos executar um comando em uma máquina remota sem ter que logarmos nela. Isso é possível utilizando o SSH. O diferencial neste caso é que, ao invés de logarmos na máquina com o SSH, o utilizamos apenas para executar o comando desejado. Por exemplo:</p>
<p>Um login comum utilizando o SSH e dispondo de compressão (modificador C) e a parte gráfica (modificador X) e executando um comando em seguida:</p>
<pre>ssh usuario@maquina -XC
$ comando</pre>
<p>Agora o mesmo procedimento, mas sem a necessidade de login:</p>
<pre>$ comando usuario@maquina:/pasta/desejada</pre>
<p>Agora um exemplo real: Suponha que queiramos copiar um arquivo que está em na máquina local de um local para um outro local na maquina remota.</p>
<pre>$ cd /pasta/local/desejada
$ scp arquivo usuario@maquina:/pasta/desejada</pre>
<p>Uma outra situação seria aquela em que se deseja executar um programa gráfico em uma máquina que está dentro de uma rede diferente da sua e que por algum motivo, não se consegue obter display. Por exemplo, vamos partir da máquina 1 e executar o programa na máquina 3, sendo que as redes das máquinas 1 e 3 são diferentes (em outras palavras, as máquinas não se enxergam). Para isto, vamos precisar de uma segunda máquina, que nos sirva de ponte entre as máquinas 1 e 3:</p>
<p>SSH na máquina 1:</p>
<pre>$ ssh usuario@maquina1 -XC</pre>
<p>SSH na máquina 2:</p>
<pre>$ ssh usuario@maquina2 -XC</pre>
<p>SSH na máquina 3:</p>
<pre>$ ssh usuario@maquina3 -XC</pre>
<p>Execução do comando X (um comando qualquer que abra a parte gráfica, por exemplo o editor de textos nedit):</p>
<pre>usuario@maquina3 $ nedit
Cannot open display.</pre>
<p>Isso pode acontecer ou porque a variável DISPLAY não está ajustada corretamente. A variável DISPLAY permitirá, por exemplo, exportar o display da máquina 3 para a máquina 2 ou qualquer outra máquina que se tenha acesso e que consiga enxergar a máquina 3. Em outro caso em que o export do display da máquina 3 não funcionar (por algum motivo…), pode-se tentar executar o comando “nedit” (ou qualquer outro que abra a parte gráfica), via SSH:</p>
<p>SSH na máquina 1:</p>
<pre>$ ssh usuario@maquina1 -XC</pre>
<p>SSH na máquina 2:</p>
<pre>$ ssh usuario@maquina2 -XC</pre>
<p>Execução do comando “X” (que pode ser, por exemplo, o nedit) via SSH:</p>
<pre>usuario@maquina2 $ ssh maquina3 "nedit"</pre>
<p>Pimba, e de repente tudo funciona! O que acontece é que, quando se executa o comando “X” através do SSH, o display é automaticamente exportando para a máquina em que se executa o comando, no caso a máquina 2. Não é garantido que irá funcionar, mas para uma necessidade que tive funcionou. Tudo pode depender da topologia das redes e das permissões de acesso.</p>
