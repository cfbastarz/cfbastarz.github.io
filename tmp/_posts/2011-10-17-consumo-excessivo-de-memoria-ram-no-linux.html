---
layout: post
title: Consumo excessivo de memória RAM no Linux
date: 2011-10-17 08:55:09.000000000 -02:00
type: post
parent_id: '0'
published: true
password: ''
status: publish
categories:
- Tudo
- Tutoriais
tags:
- cache
- kernal 2.6.26
- Linux
- RAM
- sysctl
- Ubuntu 11.04
meta:
  _wpas_skip_fb: '1'
  _wpas_skip_ms: '1'
  _wpas_skip_twitter: '1'
  _wp_old_slug: consumo-ecessivo-de-memoria-ram-no-linux
  _edit_last: '13386696'
  _thumbnail_id: '1277'
  _oembed_295632284cf0624a45b11cefb7810167: "{{unknown}}"
  _oembed_94bb6633d019dbd588e11f76b6f27241: "{{unknown}}"
  _oembed_bc6507f53879a419072b26355ee657fa: "{{unknown}}"
author:
  login: craftmind
  email: cfbastarz@gmail.com
  display_name: cfbastarz
  first_name: ''
  last_name: ''
permalink: "/2011/10/17/consumo-excessivo-de-memoria-ram-no-linux/"
---
<p>Minha máquina de trabalho possui 16GB de memória RAM. Tenho nela o Ubuntu 11.04, o qual consegue consumir - sem a menor cerimônia, 6GB de memória depois de alguns dias ligada. Isso ocorre porque qualquer sistema operacional (principalmente o Linux) faz o cache dos programas que você mais usa. Essa atividade do sistema operacional, permite que você possa acessar mais rápidos os seus programas.</p>
<p>A partir do kernel 2.6.16, foi adicionada uma função que permite limitar o consumo de memória para esse tipo de cache. Para limitar o consumo de memória para cache no sistema, basta usar o comando</p>
<p># sysctl -w vm.drop_caches=3</p>
<p>Esse comando irá alterar o valor (conteúdo) do arquivo /proc/sys/vm/drop_caches de "0" para "3".</p>
<p>O comando acima limpa o arquivo de paginação (caso exista uma partição swap), arquivos, pastas e "ponteiros" armazenado naquele local.</p>
<p>Para limpar apenas o arquivo de paginação, execute o comando:</p>
<p># sysctl -w vm.drop_caches=1</p>
<p>Para limpar apenas os arquivos, pastas e "ponteiros", execute o comando:</p>
<p># sysctl -w vm.drop_caches=2</p>
<p>Veja o resultado, antes e depois, com o comando "free -m":</p>
<p>Antes:</p>
<pre>carlos ~ $ free -m
             total       used       free     shared    buffers     cached
Mem:         16064      15840        223          0       1093       8369
-/+ buffers/cache:       6377       9687
Swap:            0          0          0</pre>
<p>Depois:</p>
<pre>root /home/carlos # free -m
             total       used       free     shared    buffers     cached
Mem:         16064       5843      10220          0         18        193
-/+ buffers/cache:       5632      10431
Swap:            0          0          0</pre>
<p>Se você tem pouca memória RAM e quer destruir tudo o que está em cache (swap!), basta "desligar/ligar" sua aprtição swap:</p>
<pre>$ swapoff -a
$ swapon -a</pre>
<p><strong>Referências:</strong></p>
<ul>
<li><a href="http://blog.aeciopires.com/consumo-abusivo-de-memoria-pelo-ubuntu/">http://blog.aeciopires.com/consumo-abusivo-de-memoria-pelo-ubuntu/</a></li>
<li><a href="http://linux-mm.org/Drop_Caches">http://linux-mm.org/Drop_Caches</a></li>
<li><a href="http://unix.stackexchange.com/questions/6267/how-to-unswap-my-desktop">http://unix.stackexchange.com/questions/6267/how-to-unswap-my-desktop</a></li>
</ul>
