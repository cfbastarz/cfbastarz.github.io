---
layout: post
title: NCARG/NCL no Mac OS X
date: 2012-07-13 01:25:48.000000000 -03:00
type: post
parent_id: '0'
published: true
password: ''
status: publish
categories:
- Ciência
- Tudo
- Tutoriais
tags:
- Earth System Grid
- GRIB
- HDF
- NCARG
- NCL
- NetCDF
meta:
  _edit_last: '13386696'
  _oembed_b512f439c5ae5bb12868fc30010aac06: "{{unknown}}"
  _oembed_7ab3495eb9baaeb5477e868b0d95ffed: "{{unknown}}"
  _oembed_8f4073f4b1167447637c8c37312cbe5a: "{{unknown}}"
  _oembed_c86e0594b550785e5583817bba2f1121: "{{unknown}}"
  _oembed_4e65fd416270e460cb4473201e4ef0da: "{{unknown}}"
  _oembed_526d2e15897206d84ebdf40e796e0666: "{{unknown}}"
  _oembed_54c0ef1fc2f9f8ec5c009d7bfd72b88f: "{{unknown}}"
  _oembed_079c65a2d35e81f4b932719fe424d045: "{{unknown}}"
  _oembed_7fb50bbc44844070418b3cf34da6d5f4: "{{unknown}}"
  _oembed_4eb843f00e55d3be23698e94f5267dee: "{{unknown}}"
  _oembed_38496d48fe4381454cb8c2c96ad1ad2e: "{{unknown}}"
  _oembed_4a025e91f118749426abeb656fc5bf92: "{{unknown}}"
  _oembed_8905f6adabffd0149dbabc88fbd354f3: "{{unknown}}"
  _oembed_61a5db3179693d8b18986df67984eeab: "{{unknown}}"
  _oembed_64433cf978c5093944bc252b0ababc4f: "{{unknown}}"
  _oembed_30065d193853d727e393190236b36fd5: "{{unknown}}"
  _oembed_505bf621009b624d3855f5474ecc6c6c: "{{unknown}}"
  _oembed_06e3db5b1bfbe40eaf7205c493f0ee50: "{{unknown}}"
  _oembed_40c7fdc2039d0d97c2f5cf580b4cbc08: "{{unknown}}"
  _oembed_4edd5e253addcf833989fcbda27a276d: "{{unknown}}"
  _oembed_b062235a114ecc597c57c5869d664332: "{{unknown}}"
  _oembed_f3ffb132bc9f53b1634db6576bda5d97: "{{unknown}}"
  _oembed_4f971edfc72ec567762c69349fb0b4c9: "{{unknown}}"
  _oembed_a554aaa087c676ddb3a143e9956baa3d: "{{unknown}}"
  _oembed_ce2e03595cc0e58f59067dc6f4316d6a: "{{unknown}}"
author:
  login: craftmind
  email: cfbastarz@gmail.com
  display_name: cfbastarz
  first_name: ''
  last_name: ''
permalink: "/2012/07/13/ncarg-no-mac-os-x/"
---
<p>O <a href="http://ngwww.ucar.edu/" target="_blank">NCARG</a> é um poderoso software de visualização de arquivos em ponto de grade (GRIB, NetCDF, HDF) com linguagem própria. Para instalá-lo no Mac OS X, você tem duas alternativas:</p>
<ol>
<li>Utilizando o port do Mac OS X pela linha de comando</li>
<li>Baixando o pacote de binários pré-compilados no site do <a href="http://www.earthsystemgrid.org/home.htm" target="_blank">Earth System Grid</a></li>
</ol>
<p>Na primeia opção, obtive o seguinte erro:</p>
<pre>$ sudo port install ncarg
 Password:
 ---&gt;  Computing dependencies for ncarg
 ---&gt;  Dependencies to be installed: hdfeos hdfeos5 lesstif xorg-libXp xorg-printproto triangle vis5d mesa xorg-dri2proto xorg-glproto tcl
 ---&gt;  Configuring hdfeos
 Error: org.macports.configure for port hdfeos returned: configure failure: command execution failed
 Error: Failed to install hdfeos
 Please see the log file for port hdfeos for details:
 /opt/local/var/macports/logs/_opt_local_var_macports_sources_rsync.macports.org_release_tarballs_ports_science_hdfeos/hdfeos/main.log
 Error: The following dependencies were not installed: hdfeos hdfeos5 lesstif xorg-libXp xorg-printproto triangle vis5d mesa xorg-dri2proto xorg-glproto tcl
 To report a bug, follow the instructions in the guide:
 http://guide.macports.org/#project.tickets
 Error: Processing of port ncarg failed</pre>
<p>Ou seja, entre várias outras dependências que precisam ser instaladas, o programa hdfeos não pode ser corretamente configurado para compilação porque o script de configuração tenta utilizar o programa szip para a compilação e não consegue encontrá-lo:</p>
<pre>$ more /opt/local/var/macports/logs/_opt_local_var_macports_sources_rsync.macports.org_release_tarballs_ports_science_hdfeos/hdfeos/main.log
info:configure configure: error: HDF4 was linked without SZIP, but --with-szlib was given
:info:configure Command failed:  cd "/opt/local/var/macports/build/_opt_local_var_macports_sources_rsync.macports.org_release_tarballs_ports_science_hdfeos/hdfeos/work/hdfeos" &amp;&amp; ./configure --prefix=/opt/local --with-hdf4=/opt/local --with-zlib=/opt/local --with-szlib=/opt/local --disable-dependency-tracking 
:info:configure Exit code: 1</pre>
<p>Por isto, vamos utilizar a segunda opção, que é baixar o pacote com os binários pré-compilados para o Mac OS X. No meu caso, estou no Mac OS X Lion com gcc 4.2.1. Para baixar o arquivo com os executáveis, antes você irá precisar de uma <a href="http://openid.net/get-an-openid/" target="_blank">OpenID</a> e uma senha para poder logar no site do Earth System Grid e baixar o seguinte pacote:</p>
<ul>
<li><a href="http://www.earthsystemgrid.org/browse/viewCollectionFilesLicenseAgreement.htm?datasetId=e358a0ab-a84d-11e1-86fa-00c0f03d5b7c" target="_blank">ncl_ncarg-6.1.0-beta.MacOS_10.7_x86_64_gcc421.tar.gz</a></li>
</ul>
<p>Com o pacote já baixado, vamos às etapas de instalação:</p>
<p><strong>1) Crie uma pasta para o NCARG em /opt (pode ser em outro local, mas adapte as etapas seguintes):</strong></p>
<pre>$ sudo mkdir -p /opt/ncl_ncarg-6.1.0-beta</pre>
<p><strong>2) Desempacote o pacote baixado na pasta criada:</strong></p>
<pre>$ sudo tar -zxvf ncl_ncarg-6.1.0-beta.MacOS_10.7_x86_64_gcc421.tar.gz -C /opt/ncl_ncarg-6.1.0-beta</pre>
<p><strong>3) Inclua as seguintes variáveis de ambiente no seu .bash_profile (caso não tenha um, basta criá-lo):</strong></p>
<pre>export NCARG_ROOT="/opt/ncl-ncarg-6.1.0-beta"
export NDV_COLORMAP_PATH="${NCARG_ROOT}/lib/ncarg/colormaps"
export PATH="${NCARG_ROOT}/bin":${PATH}
export C_INCLUDE_PATH="${NCARG_ROOT}/include":${C_INCLUDE_PATH}
export LIBRARY_PATH="${NCARG_ROOT}/lib":${LIBRARY_PATH}</pre>
<p>Feito isto, basta reabrir o terminal e executar o ncl:</p>
<p>[caption id="attachment_1715" align="aligncenter" width="447"]<a href="http://craftmind.wordpress.com/2012/07/13/ncarg-no-mac-os-x/screen-shot-2012-07-13-at-12-20-15-am-2/" rel="attachment wp-att-1715"><img class="size-full wp-image-1715 " title="Screen Shot 2012-07-13 at 12.20.15 AM" src="{{ site.baseurl }}/assets/screen-shot-2012-07-13-at-12-20-15-am1.png" alt="" width="447" height="163" /></a> NCARG/NCL no Mac OS X Lion![/caption]</p>
<p style="text-align:center;">
